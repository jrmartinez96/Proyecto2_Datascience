l13<-guatemala[guatemala$Categoria == "PAQUETES",]
l13$Categoria_Num <- 13
l14<-guatemala[guatemala$Categoria == "PREMIOS",]
l14$Categoria_Num <- 14
l15<-guatemala[guatemala$Categoria == "PROMOCIONALES VENDIDOS",]
l15$Categoria_Num <- 15
l16<-guatemala[guatemala$Categoria == "SALUD Y BIENESTAR",]
l16$Categoria_Num <- 16
l17<-guatemala[guatemala$Categoria == "TEENS",]
l17$Categoria_Num <- 17
l18<-guatemala[guatemala$Categoria == "USO DIARIO",]
l18$Categoria_Num <- 18
l19<-guatemala[is.na(guatemala$Categoria),]
l19$Categoria_Num <- 19
guatemala<-rbind(l1,l2,l3,l4,l5,l6,l7,l8,l9,l10,l11,l12,l13,l4,l15,l16,l17,l18,l19)
View(guatemala)
as.factor(guatemala$`Canal de Venta`)
guatemala$CanalVentaNum<-""
l1<-guatemala[guatemala$`Canal de Venta` == "Catalogo",]
l1$CanalVentaNum<-1
l2<-guatemala[guatemala$`Canal de Venta` == "Contingencia",]
l2$CanalVentaNum<-2
l3<-guatemala[guatemala$`Canal de Venta` == "Scentia Al Dia",]
l3$CanalVentaNum<-3
guatemala<-rbind(l1,l2,l3)
View(guatemala)
guatemala$PaginacionNum<-""
l1<-guatemala[guatemala$Pagina...22 == "Full spread",]
l1$PaginacionNum<- 1
l2<-guatemala[guatemala$Pagina...22 == "pagina derecha",]
l2$PaginacionNum<- 2
l3<-guatemala[guatemala$Pagina...22 == "pagina izquierda",]
l3$PaginacionNum<- 3
guatemala<-rbind(l1,l2,l3)
View(guatemala)
# cambio de text a numeros EL SALVADOR
as.factor(el_salvador$Categoria)
el_salvador$Categoria_Num<-""
View(el_salvador)
l1<-el_salvador[el_salvador$Categoria == "CABELLO",]
l1$Categoria_Num <- 1
l2<-el_salvador[el_salvador$Categoria == "CUIDADO DE LA PIEL",]
l2$Categoria_Num <- 2
l3<-el_salvador[el_salvador$Categoria == "CUIDADO DE LAS U?AS",]
l3$Categoria_Num <- 3
l4<-el_salvador[el_salvador$Categoria == "CUIDADO PERSONAL",]
l4$Categoria_Num <- 4
l5<-el_salvador[el_salvador$Categoria == "DIVISION FARMA",]
l5$Categoria_Num <- 5
l6<-el_salvador[el_salvador$Categoria == "ELLAS",]
l6$Categoria_Num <- 6
l7<-el_salvador[el_salvador$Categoria == "ELLOS",]
l7$Categoria_Num <- 7
l8<-el_salvador[el_salvador$Categoria == "GASTOS PROMOCIONALES",]
l8$Categoria_Num <- 8
l9<-el_salvador[el_salvador$Categoria == "JOYERIA",]
l9$Categoria_Num <- 9
l10<-el_salvador[el_salvador$Categoria == "LIMPIEZA",]
l10$Categoria_Num <- 10
l11<-el_salvador[el_salvador$Categoria == "MAQUILLAJE",]
l11$Categoria_Num <- 11
l12<-el_salvador[el_salvador$Categoria == "NI?OS",]
l12$Categoria_Num <- 12
l13<-el_salvador[el_salvador$Categoria == "PAQUETES",]
l13$Categoria_Num <- 13
l14<-el_salvador[el_salvador$Categoria == "PREMIOS",]
l14$Categoria_Num <- 14
l15<-el_salvador[el_salvador$Categoria == "PROMOCIONALES VENDIDOS",]
l15$Categoria_Num <- 15
l16<-el_salvador[el_salvador$Categoria == "SALUD Y BIENESTAR",]
l16$Categoria_Num <- 16
l17<-el_salvador[el_salvador$Categoria == "TEENS",]
l17$Categoria_Num <- 17
l18<-el_salvador[el_salvador$Categoria == "USO DIARIO",]
l18$Categoria_Num <- 18
l19<-el_salvador[is.na(el_salvador$Categoria),]
l19$Categoria_Num <- 19
el_salvador<-rbind(l1,l2,l3,l4,l5,l6,l7,l8,l9,l10,l11,l12,l13,l4,l15,l16,l17,l18,l19)
View(el_salvador)
as.factor(el_salvador$`Canal de Venta`)
el_salvador$CanalVentaNum<-""
l1<-el_salvador[el_salvador$`Canal de Venta` == "Catalogo",]
l1$CanalVentaNum<-1
l2<-el_salvador[el_salvador$`Canal de Venta` == "Contingencia",]
l2$CanalVentaNum<-2
l3<-el_salvador[el_salvador$`Canal de Venta` == "Scentia Al Dia",]
l3$CanalVentaNum<-3
el_salvador<-rbind(l1,l2,l3)
View(el_salvador)
el_salvador$PaginacionNum<-""
l1<-el_salvador[el_salvador$Pagina...22 == "Full spread",]
l1$PaginacionNum<-1
l2<-el_salvador[el_salvador$Pagina...22 == "pagina derecha",]
l2$PaginacionNum<-2
l3<-el_salvador[el_salvador$Pagina...22 == "pagina izquierda",]
l3$PaginacionNum<-3
el_salvador<-rbind(l1,l2,l3)
View(el_salvador)
# cambio de text a numeros HONDURAS
as.factor(honduras$Categoria)
honduras$Categoria_Num<-""
l1<-honduras[honduras$Categoria == "CABELLO",]
l1$Categoria_Num <- 1
l2<-honduras[honduras$Categoria == "CUIDADO DE LA PIEL",]
l2$Categoria_Num <- 2
l3<-honduras[honduras$Categoria == "CUIDADO DE LAS U?AS",]
l3$Categoria_Num <- 3
l4<-honduras[honduras$Categoria == "CUIDADO PERSONAL",]
l4$Categoria_Num <- 4
l5<-honduras[honduras$Categoria == "DIVISION FARMA",]
l5$Categoria_Num <- 5
l6<-honduras[honduras$Categoria == "ELLAS",]
l6$Categoria_Num <- 6
l7<-honduras[honduras$Categoria == "ELLOS",]
l7$Categoria_Num <- 7
l8<-honduras[honduras$Categoria == "GASTOS PROMOCIONALES",]
l8$Categoria_Num <- 8
l9<-honduras[honduras$Categoria == "JOYERIA",]
l9$Categoria_Num <- 9
l10<-honduras[honduras$Categoria == "LIMPIEZA",]
l10$Categoria_Num <- 10
l11<-honduras[honduras$Categoria == "MAQUILLAJE",]
l11$Categoria_Num <- 11
l12<-honduras[honduras$Categoria == "NI?OS",]
l12$Categoria_Num <- 12
l13<-honduras[honduras$Categoria == "PAQUETES",]
l13$Categoria_Num <- 13
l14<-honduras[honduras$Categoria == "PREMIOS",]
l14$Categoria_Num <- 14
l15<-honduras[honduras$Categoria == "PROMOCIONALES VENDIDOS",]
l15$Categoria_Num <- 15
l16<-honduras[honduras$Categoria == "SALUD Y BIENESTAR",]
l16$Categoria_Num <- 16
l17<-honduras[honduras$Categoria == "TEENS",]
l17$Categoria_Num <- 17
l18<-honduras[honduras$Categoria == "USO DIARIO",]
l18$Categoria_Num <- 18
l19<-honduras[is.na(honduras$Categoria),]
l19$Categoria_Num <- 19
honduras<-rbind(l1,l2,l3,l4,l5,l6,l7,l8,l9,l10,l11,l12,l13,l4,l15,l16,l17,l18,l19)
View(honduras)
as.factor(honduras$`Canal de Venta`)
honduras$CanalVentaNum<-""
l1<-honduras[honduras$`Canal de Venta` == "Catalogo",]
l1$CanalVentaNum<-1
l2<-honduras[honduras$`Canal de Venta` == "Contingencia",]
l2$CanalVentaNum<-2
l3<-honduras[honduras$`Canal de Venta` == "Scentia Al Dia",]
l3$CanalVentaNum<-3
honduras<-rbind(l1,l2,l3)
View(honduras)
honduras$PaginacionNum<-""
l1<-honduras[honduras$Pagina...22 == "Full spread",]
l1$PaginacionNum<-1
l2<-honduras[honduras$Pagina...22 == "pagina derecha",]
l2$PaginacionNum<-2
l3<-honduras[honduras$Pagina...22 == "pagina izquierda",]
l3$PaginacionNum<-3
honduras<-rbind(l1,l2,l3)
View(honduras)
# cambio de text a numeros NICARAGUA
as.factor(nicaragua$Categoria)
nicaragua$Categoria_Num<-""
l1<-nicaragua[nicaragua$Categoria == "CABELLO",]
l1$Categoria_Num <- 1
l2<-nicaragua[nicaragua$Categoria == "CUIDADO DE LA PIEL",]
l2$Categoria_Num <- 2
l3<-nicaragua[nicaragua$Categoria == "CUIDADO DE LAS U?AS",]
l3$Categoria_Num <- 3
l4<-nicaragua[nicaragua$Categoria == "CUIDADO PERSONAL",]
l4$Categoria_Num <- 4
l5<-nicaragua[nicaragua$Categoria == "DIVISION FARMA",]
l5$Categoria_Num <- 5
l6<-nicaragua[nicaragua$Categoria == "ELLAS",]
l6$Categoria_Num <- 6
l7<-nicaragua[nicaragua$Categoria == "ELLOS",]
l7$Categoria_Num <- 7
l8<-nicaragua[nicaragua$Categoria == "GASTOS PROMOCIONALES",]
l8$Categoria_Num <- 8
l9<-nicaragua[nicaragua$Categoria == "JOYERIA",]
l9$Categoria_Num <- 9
l10<-nicaragua[nicaragua$Categoria == "LIMPIEZA",]
l10$Categoria_Num <- 10
l11<-nicaragua[nicaragua$Categoria == "MAQUILLAJE",]
l11$Categoria_Num <- 11
l12<-nicaragua[nicaragua$Categoria == "NI?OS",]
l12$Categoria_Num <- 12
l13<-nicaragua[nicaragua$Categoria == "PAQUETES",]
l13$Categoria_Num <- 13
l14<-nicaragua[nicaragua$Categoria == "PREMIOS",]
l14$Categoria_Num <- 14
l15<-nicaragua[nicaragua$Categoria == "PROMOCIONALES VENDIDOS",]
l15$Categoria_Num <- 15
l16<-nicaragua[nicaragua$Categoria == "SALUD Y BIENESTAR",]
l16$Categoria_Num <- 16
l17<-nicaragua[nicaragua$Categoria == "TEENS",]
l17$Categoria_Num <- 17
l18<-nicaragua[nicaragua$Categoria == "USO DIARIO",]
l18$Categoria_Num <- 18
l19<-nicaragua[is.na(nicaragua$Categoria),]
l19$Categoria_Num <- 19
nicaragua<-rbind(l1,l2,l3,l4,l5,l6,l7,l8,l9,l10,l11,l12,l13,l4,l15,l16,l17,l18,l19)
View(nicaragua)
as.factor(nicaragua$`Canal de Venta`)
nicaragua$CanalVentaNum<-""
l1<-nicaragua[nicaragua$`Canal de Venta` == "Catalogo",]
l1$CanalVentaNum<-1
l2<-nicaragua[nicaragua$`Canal de Venta` == "Contingencia",]
l2$CanalVentaNum<-2
l3<-nicaragua[nicaragua$`Canal de Venta` == "Scentia Al Dia",]
l3$CanalVentaNum<-3
nicaragua<-rbind(l1,l2,l3)
View(nicaragua)
nicaragua$PaginacionNum<-""
l1<-nicaragua[nicaragua$Pagina...22 == "Full spread",]
l1$PaginacionNum<-1
l2<-nicaragua[nicaragua$Pagina...22 == "pagina derecha",]
l2$PaginacionNum<-2
l3<-nicaragua[nicaragua$Pagina...22 == "pagina izquierda",]
l3$PaginacionNum<-3
nicaragua<-rbind(l1,l2,l3)
View(nicaragua)
#Union de todas las tablas para crear un conjunto que represente a centroamérica
ventas.centroamerica<-rbind(guatemala,honduras,nicaragua,el_salvador)
View(ventas.centroamerica)
# ------------------------ Proceso de limpieza de los datos ---------------------------
#Cambio de nombres a columnas
names(ventas.centroamerica)[names(ventas.centroamerica) == "Pagina...7"] <- "Pagina_cat"
names(ventas.centroamerica)[names(ventas.centroamerica) == "Pagina...22"] <- "Pagina"
names(ventas.centroamerica)[names(ventas.centroamerica) == "%...24"] <- "Porcentaje"
names(ventas.centroamerica)[names(ventas.centroamerica) == "%...26"] <- "Porcentaje2"
#Arreglo nivel 210811 en categoria A?o mes
ventas.centroamerica$`Año Mes` <- gsub("210811","201811",ventas.centroamerica$`Año Mes`)
#Quitar caracteres \r|\n de  columna descripcion
ventas.centroamerica$Descripcion <- gsub("\r|\n","",ventas.centroamerica$Descripcion)
#transformación en columna contingencia de Farma -> farma
ventas.centroamerica$Contingencia <- gsub("farma","Farma",ventas.centroamerica$Contingencia)
#Pagina | pagina derecha Pagina derecha, Pagina izquierda pagina izquierda
ventas.centroamerica$Pagina <- gsub("Pagina derecha","pagina derecha", ventas.centroamerica$Pagina)
ventas.centroamerica$Pagina <- gsub("Pagina izquierda","pagina izquierda", ventas.centroamerica$Pagina)
#Tipo Precio | intruduccion Introduccion, precio normal Precio Normal
ventas.centroamerica$`Tipo Precio` <- gsub("Introduccion","introduccion",ventas.centroamerica$`Tipo Precio`)
ventas.centroamerica$`Tipo Precio` <- gsub("Precio Normal","precio normal",ventas.centroamerica$`Tipo Precio`)
#Atributo Neto | No aplica No Aplica
ventas.centroamerica$`Atributo Neto`<- gsub("No Aplica", "No aplica", ventas.centroamerica$`Atributo Neto`)
#Energy Chart | cierre Cierre, oferta esencial Oferta esencial
ventas.centroamerica$`Energy Chart` <- gsub("Cierre","cierre", ventas.centroamerica$`Energy Chart`)
ventas.centroamerica$`Energy Chart` <- gsub("Oferta esencial","oferta esencial", ventas.centroamerica$`Energy Chart`)
#Promociones | 1 x 2 x 1 X 2 X , 2 x 2 x 2x 2x, contingencia Contingencia, Producto gratis producto gratis Producto Gratis,
#promocion precio Promocion precio Promocion Precio
ventas.centroamerica$Promociones <- gsub("1 X 2 X","1 x 2 x",ventas.centroamerica$Promociones)
ventas.centroamerica$Promociones <- gsub("2x 2x","2 x 2 x",ventas.centroamerica$Promociones)
ventas.centroamerica$Promociones <- gsub("Contingencia","contingencia",ventas.centroamerica$Promociones)
ventas.centroamerica$Promociones <- gsub("Producto gratis|Producto Gratis","producto gratis",ventas.centroamerica$Promociones)
ventas.centroamerica$Promociones <- gsub("Promocion Precio|Promocion precio","promocion precio",ventas.centroamerica$Promociones)
#Treboles extra | si SI
ventas.centroamerica$`Treboles extra` <- gsub("SI","si",ventas.centroamerica$`Treboles extra`)
#Cambio de columnas de tipo char a factor
col_names <- c("Año Mes","Producto","Codigo Catalogo","CONCA","Tipo Comision","Pagina_cat","Descripcion","Categoria","Linea","Observaciones","Canal de Venta","Contingencia","Pagina","Tipo Precio","Atributo Neto","Energy Chart","Promociones","Recursos Especiales","Treboles extra")
ventas.centroamerica$Costo <- as.numeric(ventas.centroamerica$Costo)
ventas.centroamerica[col_names] <- lapply(ventas.centroamerica[col_names] , factor)
ventas.centroamerica <- subset(ventas.centroamerica, is.na(Producto))
View(ventas.centroamerica)
ventas.centroamerica<-rbind(guatemala,honduras,nicaragua,el_salvador)
#Cambio de nombres a columnas
names(ventas.centroamerica)[names(ventas.centroamerica) == "Pagina...7"] <- "Pagina_cat"
names(ventas.centroamerica)[names(ventas.centroamerica) == "Pagina...22"] <- "Pagina"
names(ventas.centroamerica)[names(ventas.centroamerica) == "%...24"] <- "Porcentaje"
names(ventas.centroamerica)[names(ventas.centroamerica) == "%...26"] <- "Porcentaje2"
#Arreglo nivel 210811 en categoria A?o mes
ventas.centroamerica$`Año Mes` <- gsub("210811","201811",ventas.centroamerica$`Año Mes`)
#Quitar caracteres \r|\n de  columna descripcion
ventas.centroamerica$Descripcion <- gsub("\r|\n","",ventas.centroamerica$Descripcion)
#transformación en columna contingencia de Farma -> farma
ventas.centroamerica$Contingencia <- gsub("farma","Farma",ventas.centroamerica$Contingencia)
#Pagina | pagina derecha Pagina derecha, Pagina izquierda pagina izquierda
ventas.centroamerica$Pagina <- gsub("Pagina derecha","pagina derecha", ventas.centroamerica$Pagina)
ventas.centroamerica$Pagina <- gsub("Pagina izquierda","pagina izquierda", ventas.centroamerica$Pagina)
#Tipo Precio | intruduccion Introduccion, precio normal Precio Normal
ventas.centroamerica$`Tipo Precio` <- gsub("Introduccion","introduccion",ventas.centroamerica$`Tipo Precio`)
ventas.centroamerica$`Tipo Precio` <- gsub("Precio Normal","precio normal",ventas.centroamerica$`Tipo Precio`)
#Atributo Neto | No aplica No Aplica
ventas.centroamerica$`Atributo Neto`<- gsub("No Aplica", "No aplica", ventas.centroamerica$`Atributo Neto`)
#Energy Chart | cierre Cierre, oferta esencial Oferta esencial
ventas.centroamerica$`Energy Chart` <- gsub("Cierre","cierre", ventas.centroamerica$`Energy Chart`)
ventas.centroamerica$`Energy Chart` <- gsub("Oferta esencial","oferta esencial", ventas.centroamerica$`Energy Chart`)
#Promociones | 1 x 2 x 1 X 2 X , 2 x 2 x 2x 2x, contingencia Contingencia, Producto gratis producto gratis Producto Gratis,
#promocion precio Promocion precio Promocion Precio
ventas.centroamerica$Promociones <- gsub("1 X 2 X","1 x 2 x",ventas.centroamerica$Promociones)
ventas.centroamerica$Promociones <- gsub("2x 2x","2 x 2 x",ventas.centroamerica$Promociones)
ventas.centroamerica$Promociones <- gsub("Contingencia","contingencia",ventas.centroamerica$Promociones)
ventas.centroamerica$Promociones <- gsub("Producto gratis|Producto Gratis","producto gratis",ventas.centroamerica$Promociones)
ventas.centroamerica$Promociones <- gsub("Promocion Precio|Promocion precio","promocion precio",ventas.centroamerica$Promociones)
#Treboles extra | si SI
ventas.centroamerica$`Treboles extra` <- gsub("SI","si",ventas.centroamerica$`Treboles extra`)
#Cambio de columnas de tipo char a factor
col_names <- c("Año Mes","Producto","Codigo Catalogo","CONCA","Tipo Comision","Pagina_cat","Descripcion","Categoria","Linea","Observaciones","Canal de Venta","Contingencia","Pagina","Tipo Precio","Atributo Neto","Energy Chart","Promociones","Recursos Especiales","Treboles extra")
ventas.centroamerica$Costo <- as.numeric(ventas.centroamerica$Costo)
ventas.centroamerica[col_names] <- lapply(ventas.centroamerica[col_names] , factor)
ventas.centroamerica <- subset(ventas.centroamerica, !is.na(Producto))
View(ventas.centroamerica)
apply(is.na(ventas.centroamerica$Costo,1,ventas.centroamerica$Costo = 0))
source('C:/Users/anali/Desktop/Pablito/octavo_semestre/Data science/Proyecto2_Datascience/testDeImportacion.R', encoding = 'UTF-8')
view(ventas.centroamerica)
View(ventas.centroamerica)
num <- unlist(lapply(ventas.centroamerica, is.numeric))
cat <- unlist(lapply(ventas.centroamerica, is.factor))
vcnum <- ventas.centroamerica[,num]
View(vcnum)
p_uv_pro <- ventas.centroamerica[,c(2,11,12)]
View(p_uv_pro)
str(p_uv_pro)
levels(p_uv_pro$Producto)
?group_by
test <- group_by(p_uv_pro, Producto)
View(test)
aggregate(cbind(p_uv_pro$Pronostico, p_uv_pro$`Unidades Vendidas`) by=list(Category=p_uv_pro$Producto), FUN=sum)
aggregate(cbind(p_uv_pro$Pronostico, p_uv_pro$`Unidades Vendidas`),by=list(Category=p_uv_pro$Producto), FUN=sum)
View(p_uv_pro)
p_uv_pro <- aggregate(cbind(p_uv_pro$Pronostico, p_uv_pro$`Unidades Vendidas`),by=list(Category=p_uv_pro$Producto), FUN=sum)
View(p_uv_pro)
str(p_uv_pro)
?apply
p_uv_pro$diferencia <- apply(p_uv_pro, 1, Pronostico - `Unidades Vendidas`)
p_uv_pro$diferencia <- apply(p_uv_pro, 1, p_uv_pro$Pronostico - p_uv_pro$`Unidades Vendidas`)
p_uv_pro$diferencia <- apply(p_uv_pro, 1, p_uv_pro$V2 - p_uv_pro$V1)
?sum
p_uv_pro$diferencia <- p_uv_pro$V2 - p_uv_pro$V1
View(p_uv_pro)
p_uv_pro <- ventas.centroamerica[,c(2,11,12)]
View(p_uv_pro)
p_uv_pro <- aggregate(cbind(p_uv_pro$Pronostico, p_uv_pro$`Unidades Vendidas`),by=list(Category=p_uv_pro$Producto), FUN=sum)
View(p_uv_pro)
p_uv_pro <- ventas.centroamerica[,c(2,11,12)]
p_uv_pro2 <- aggregate(cbind(p_uv_pro$Pronostico, p_uv_pro$`Unidades Vendidas`),by=list(Category=p_uv_pro$Producto), FUN=sum)
View(p_uv_pro2)
?aggregate
p_uv_pro2 <- aggregate(cbind(p_uv_pro$Pronostico, p_uv_pro$`Unidades Vendidas`),by=list(Producto=p_uv_pro$Producto), FUN=sum)
View(p_uv_pro2)
p_uv_pro <- ventas.centroamerica[,c(2,11,12)]
p_uv_pro2 <- aggregate(p_uv_pro$Pronostico,by=list(Producto=p_uv_pro$Producto), FUN=sum)
View(p_uv_pro2)
p_uv_pro <- aggregate(cbind(p_uv_pro$Pronostico, p_uv_pro$`Unidades Vendidas`),by=list(Producto=p_uv_pro$Producto), FUN=sum)
p_uv_pro$diferencia <- p_uv_pro$V1 - p_uv_pro$V2
View(p_uv_pro)
source('C:/Users/anali/Desktop/Pablito/octavo_semestre/Data science/Proyecto2_Datascience/testDeImportacion.R', encoding = 'UTF-8')
View(ventas.centroamerica)
View(p_uv_pro)
p_uv_pro <- p_uv_pro[order(diferencia)]
p_uv_pro <- p_uv_pro[order(p_uv_pro$diferencia)]
p_uv_pro <- p_uv_pro[order(diferencia),]
p_uv_pro$diferencia <- p_uv_pro$V1 - p_uv_pro$V2
p_uv_pro <- p_uv_pro[order(diferencia),]
p_uv_pro <- p_uv_pro[order(p_uv_pro$diferencia),]
View(p_uv_pro)
p_uv_pro_asc <- p_uv_pro[order(p_uv_pro$diferencia),]
p_uv_pro_desc <- p_uv_pro[order(-p_uv_pro$diferencia),]
View(p_uv_pro_asc)
View(p_uv_pro_desc)
p_uv_pro <- ventas.centroamerica[,c(2,5,11,12)]
#Agrupamos por producto, y sumamos sus u/v y pronosticos a traves de los años
p_uv_pro <- aggregate(cbind(p_uv_pro$Pronostico, p_uv_pro$`Unidades Vendidas`),by=list(Producto=p_uv_pro$Producto), FUN=sum)
p_uv_pro$diferencia <- p_uv_pro$V1 - p_uv_pro$V2
p_uv_pro_asc <- p_uv_pro[order(p_uv_pro$diferencia),]
p_uv_pro_desc <- p_uv_pro[order(-p_uv_pro$diferencia),]
View(p_uv_pro_asc)
View(p_uv_pro)
p_uv_pro <- ventas.centroamerica[,c(2,5,11,12)]
View(p_uv_pro)
p_uv_pro <- aggregate(cbind(p_uv_pro$Pronostico, p_uv_pro$`Unidades Vendidas`,p_uv_pro$Descripcion),by=list(Producto=p_uv_pro$Producto), FUN=sum)
View(p_uv_pro)
p_uv_pro <- ventas.centroamerica[,c(2,5,11,12)]
?aggregate
p_uv_pro <- ventas.centroamerica[,c(2,11,12)]
#Agrupamos por producto, y sumamos sus u/v y pronosticos a traves de los años
p_uv_pro <- aggregate(cbind(p_uv_pro$Pronostico, p_uv_pro$`Unidades Vendidas`,p_uv_pro$Descripcion),by=list(Producto=p_uv_pro$Producto), FUN=sum)
p_uv_pro$diferencia <- p_uv_pro$V1 - p_uv_pro$V2
p_uv_pro_asc <- p_uv_pro[order(p_uv_pro$diferencia),]
p_uv_pro_desc <- p_uv_pro[order(-p_uv_pro$diferencia),]
p_uv_pro <- ventas.centroamerica[,c(2,11,12)]
#Agrupamos por producto, y sumamos sus u/v y pronosticos a traves de los años
p_uv_pro <- aggregate(cbind(p_uv_pro$Pronostico, p_uv_pro$`Unidades Vendidas`),by=list(Producto=p_uv_pro$Producto), FUN=sum)
p_uv_pro$diferencia <- p_uv_pro$V1 - p_uv_pro$V2
p_uv_pro_asc <- p_uv_pro[order(p_uv_pro$diferencia),]
p_uv_pro_desc <- p_uv_pro[order(-p_uv_pro$diferencia),]
View(p_uv_pro_asc)
View(p_uv_pro_desx)
View(p_uv_pro_desc)
install.packages("neuralnet")
library(neuralnet)
?subset
nn_ventas_centroamerica <- subset(ventas.centroamerica, Producto=4123660489 || Producto = 4123310128 || Producto = 4123320382 || Producto = 4123210921 || Producto = 4123210924 || Producto = 4323580808 || Producto = 4123320398)
nn_ventas_centroamerica <- subset(ventas.centroamerica, Producto == 4123660489 || Producto == 4123310128 || Producto == 4123320382 || Producto == 4123210921 || Producto == 4123210924 || Producto == 4323580808 || Producto == 4123320398)
View(nn_ventas_centroamerica)
nn_ventas_centroamerica <- subset(ventas.centroamerica, Producto == 4123660489 && Producto == 4123310128 && Producto == 4123320382 && Producto == 4123210921 && Producto == 4123210924 && Producto == 4323580808 && Producto == 4123320398)
View(nn_ventas_centroamerica)
nn_ventas_centroamerica <- subset(ventas.centroamerica, Producto == 4123660489)
View(nn_ventas_centroamerica)
nn_ventas_centroamerica <- subset(ventas.centroamerica, Producto == 4123660489 || Producto == 4123320398 )
View(nn_ventas_centroamerica)
nn_ventas_centroamerica <- subset(ventas.centroamerica, Producto == 4123660489 && Producto == 4123320398 )
View(nn_ventas_centroamerica)
nn_ventas_centroamerica <- subset(ventas.centroamerica, Producto == 4123660489 || 4123320398 )
View(nn_ventas_centroamerica)
nn_ventas_centroamerica <- subset(ventas.centroamerica, subset = Prodcuto %in% c(4123660489,4123310128,4123310128))
nn_ventas_centroamerica <- subset(ventas.centroamerica, subset = Producto %in% c(4123660489,4123310128,4123310128))
View(nn_ventas_centroamerica)
nn_ventas_centroamerica <- subset(ventas.centroamerica, subset = Producto %in% c(4123660489,4123310128,4123310128,4123320382,4123320398,4323580808,4123210921,4123210924,4123660778,4323580477,4123320383))
View(nn_ventas_centroamerica)
nn_ventas_centroamerica <- subset(ventas.centroamerica, subset = Producto %in% c(4123660489,4123310128,4123310128,4123320382,4123320398,4323580808,4123210921,4123210924,4123660778,4323580477,4123320383,4123660107,4123660184,4123310157,4323580520,4123660683,4323621560,4123660798,4123660738,4123660155,4123320424))
View(nn_ventas_centroamerica)
porcentaje<-0.7
set.seed(678)
corte_nn<-sample(nrow(nn_ventas_centroamerica),nrow(nn_ventas_centroamerica)*porcentaje)
train_nn<-datosTraining[corte_nn,]
test_nn<-datosTraining[-corte_nn,]
corte_nn<-sample(nrow(nn_ventas_centroamerica),nrow(nn_ventas_centroamerica)*porcentaje)
train_nn<-nn_ventas_centroamerica[corte_nn,]
test_nn<-nn_ventas_centroamerica[-corte_nn,]
View(train_nn)
View(test_nn)
nn_ventas_centroamerica <- nn_ventas_centroamerica[,num <- unlist(lapply(ventas.centroamerica, is.numeric))]
View(nn_ventas_centroamerica)
source('C:/Users/anali/Desktop/Pablito/octavo_semestre/Data science/Proyecto2_Datascience/testDeImportacion.R', encoding = 'UTF-8')
nn_ventas_centroamerica[is.na(nn_ventas_centroamerica)] <- 0
View(nn_ventas_centroamerica)
corte_nn<-sample(nrow(nn_ventas_centroamerica),nrow(nn_ventas_centroamerica)*porcentaje)
train_nn<-nn_ventas_centroamerica[corte_nn,]
test_nn<-nn_ventas_centroamerica[-corte_nn,]
nn_ventas_centroamerica <- scale(nn_ventas_centroamerica)
View(nn_ventas_centroamerica)
corte_nn<-sample(nrow(nn_ventas_centroamerica),nrow(nn_ventas_centroamerica)*porcentaje)
train_nn<-nn_ventas_centroamerica[corte_nn,]
test_nn<-nn_ventas_centroamerica[-corte_nn,]
?neuralnet
source('C:/Users/anali/Desktop/Pablito/octavo_semestre/Data science/Proyecto2_Datascience/testDeImportacion.R', encoding = 'UTF-8')
corte_nn<-sample(nrow(nn_ventas_centroamerica),nrow(nn_ventas_centroamerica)*porcentaje)
train_nn<-nn_ventas_centroamerica[corte_nn,]
test_nn<-nn_ventas_centroamerica[-corte_nn,]
View(test_nn)
View(train_nn)
nn_model <- neuralnet(Pronostico~., data = train_nn, hidden=c(2,1), linear.output=FALSE, threshold=0.01 )
source('C:/Users/anali/Desktop/Pablito/octavo_semestre/Data science/Proyecto2_Datascience/testDeImportacion.R', encoding = 'UTF-8')
nn_model <- neuralnet(Pronostico ~ Costo, data = train_nn, hidden=c(2,1), linear.output=FALSE, threshold=0.01 )
nn_model <- neuralnet(Pronostico ~ ., data = train_nn, hidden=c(2,1), linear.output=FALSE, threshold=0.01 )
nn_model <- neuralnet(Pronostico~., data = train_nn, hidden=c(2,1), linear.output=FALSE, threshold=0.01 )
nn_model <- neuralnet(Pronostico ~., data = train_nn, hidden=c(2,1), linear.output=FALSE, threshold=0.01 )
nn_model <- neuralnet(Pronostico ~ Costo + Utilidad + Margen + ´Pedido Real´ + Ratio, = train_nn, hidden=c(2,1), linear.output=FALSE, threshold=0.01 )
nn_model <- neuralnet(Pronostico ~ Costo + Utilidad + Margen + ´Pedido Real´ + Ratio, data = train_nn, hidden=c(2,1), linear.output=FALSE, threshold=0.01 )
nn_model <- neuralnet(Pronostico ~ Costo + Utilidad + Margen + Ratio, data = train_nn, hidden=c(2,1), linear.output=FALSE, threshold=0.01 )
nn_model <- neuralnet(Pronostico ~ `Unidades Vendidas` + Costo + Utilidad + Margen + Ratio, data = train_nn, hidden=c(2,1), linear.output=FALSE, threshold=0.01 )
colnames(train_nn) <- c("precio_catalogo","precio_sin_iva","pronostico","uni_vendidas","venta_neta","costo","utilidad","margen","pedido_real","ratio","porcentaje","porcentaje_2")
colnames(train_nn) <- c("precio_catalogo","precio_sin_iva","pronostico","uni_vendidas","venta_neta","costo","utilidad","margen","pedido_real","ratio","porcentaje","porcentaje_2","pais_numero","categoria_numero","canalventa_numero","paginacion_numero")
View(train_nn)
nn_model <- neuralnet(Pronostico ~., data = train_nn, hidden=c(2,1), linear.output=FALSE, threshold=0.01 )
test_nn<-nn_ventas_centroamerica[-corte_nn,]
colnames(test_nn) <- c("precio_catalogo","precio_sin_iva","pronostico","uni_vendidas","venta_neta","costo","utilidad","margen","pedido_real","ratio","porcentaje","porcentaje_2","pais_numero","categoria_numero","canalventa_numero","paginacion_numero")
nn_model <- neuralnet(pronostico ~., data = train_nn, hidden=c(2,1), linear.output=FALSE, threshold=0.01 )
nn_model$result.matrix
plot(nn_model)
nn_model <- neuralnet(pronostico ~., data = train_nn, hidden=c(4,1), linear.output=FALSE, threshold=0.01 )
plot(nn_model)
nn_model <- neuralnet(pronostico ~., data = train_nn, hidden=c(2,1), linear.output=FALSE, threshold=0.01 )
temp_test <- subset(test_nn, select = c("precio_catalogo","precio_sin_iva","uni_vendidas","venta_neta","costo","utilidad","margen","pedido_real","ratio","porcentaje","porcentaje_2","pais_numero","categoria_numero","canalventa_numero","paginacion_numero"))
View(temp_test)
nn.results <- compute(nn_model, temp_test)
head(test_nn)
results <- data.frame(actual = test_nn$pronostico, prediction = nn.results$net.result)
test_nn<-nn_ventas_centroamerica[-corte_nn,]
test_nn$pronostico
is.atomic(temp_test)
test_nn <- as.data.frame(test_nn)
source('C:/Users/anali/Desktop/Pablito/octavo_semestre/Data science/Proyecto2_Datascience/testDeImportacion.R', encoding = 'UTF-8')
results <- data.frame(actual = test_nn$Pronostico, prediction = nn.results$net.result)
results
roundedresults<-sapply(results,round,digits=0)
roundedresultsdf=data.frame(roundedresults)
attach(roundedresultsdf)
table(actual,prediction)
?neuralnet
nn_model <- neuralnet(pronostico ~., data = train_nn, hidden=c(4,3,2,1), linear.output=FALSE, threshold=0.01 )
temp_test <- subset(test_nn, select = c("precio_catalogo","precio_sin_iva","uni_vendidas","venta_neta","costo","utilidad","margen","pedido_real","ratio","porcentaje","porcentaje_2","pais_numero","categoria_numero","canalventa_numero","paginacion_numero"))
nn.results <- compute(nn_model, temp_test)
results <- data.frame(actual = test_nn$Pronostico, prediction = nn.results$net.result)
roundedresults<-sapply(results,round,digits=0)
roundedresultsdf=data.frame(roundedresults)
attach(roundedresultsdf)
table(actual,prediction)
plot(nn_model)
plot(nn_model)
results
table(actual,prediction)
nn_ventas_centroamerica <- subset(ventas.centroamerica, subset = Producto %in% c(4123660489,4123310128,4123310128,4123320382,4123320398,4323580808,4123210921,4123210924,4123660778,4323580477,4123320383,4123660107,4123660184,4123310157,4323580520,4123660683,4323621560,4123660798,4123660738,4123660155,4123320424))
nn_ventas_centroamerica <- nn_ventas_centroamerica[,num <- unlist(lapply(ventas.centroamerica, is.numeric))]
nn_ventas_centroamerica[is.na(nn_ventas_centroamerica)] <- 0
corte_nn<-sample(nrow(nn_ventas_centroamerica),nrow(nn_ventas_centroamerica)*porcentaje)
train_nn<-nn_ventas_centroamerica[corte_nn,]
test_nn<-nn_ventas_centroamerica[-corte_nn,]
test_nn <- as.data.frame(test_nn)
colnames(train_nn) <- c("precio_catalogo","precio_sin_iva","pronostico","uni_vendidas","venta_neta","costo","utilidad","margen","pedido_real","ratio","porcentaje","porcentaje_2","pais_numero","categoria_numero","canalventa_numero","paginacion_numero")
colnames(test_nn) <- c("precio_catalogo","precio_sin_iva","pronostico","uni_vendidas","venta_neta","costo","utilidad","margen","pedido_real","ratio","porcentaje","porcentaje_2","pais_numero","categoria_numero","canalventa_numero","paginacion_numero")
View(train_nn)
nn_model <- neuralnet(pronostico ~., data = train_nn, hidden=c(4,3,2,1), linear.output=FALSE, threshold=0.01 )
temp_test <- subset(test_nn, select = c("precio_catalogo","precio_sin_iva","uni_vendidas","venta_neta","costo","utilidad","margen","pedido_real","ratio","porcentaje","porcentaje_2","pais_numero","categoria_numero","canalventa_numero","paginacion_numero"))
nn.results <- compute(nn_model, temp_test)
results <- data.frame(actual = test_nn$Pronostico, prediction = nn.results$net.result)
roundedresults<-sapply(results,round,digits=0)
roundedresultsdf=data.frame(roundedresults)
attach(roundedresultsdf)
table(actual,prediction)
source('C:/Users/anali/Desktop/Pablito/octavo_semestre/Data science/Proyecto2_Datascience/testDeImportacion.R', encoding = 'UTF-8')
?source
